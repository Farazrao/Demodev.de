!function(n){function e(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return n[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var t={};e.m=n,e.c=t,e.i=function(n){return n},e.d=function(n,t,o){e.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:o})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},e.p="",e(e.s=79)}({25:function(module,exports,__webpack_require__){"use strict";eval("\n\n/**\n * @param {Number} childAllowanceDefault\n * @param {Number} childAllowanceAmounts\n * @param {Number} basicExemptionAmount\n * @param {Number} otherExemptionAmounts\n * @returns {Amounts}\n */\nvar Amounts = function Amounts(childAllowanceDefault, childAllowanceAmounts, basicExemptionAmount, otherExemptionAmounts) {\n  this.childAllowanceDefault = childAllowanceDefault;\n  this.childAllowanceAmounts = childAllowanceAmounts;\n  this.basicExemptionAmount = basicExemptionAmount;\n  this.otherExemtpionAmounts = otherExemptionAmounts;\n};\n\n/**\n * @param {Number} index\n * @returns {Number}\n */\nAmounts.prototype.calculateChildAllowance = function (index) {\n  return typeof this.childAllowanceAmounts[index] !== 'undefined' ? this.childAllowanceAmounts[index] : this.childAllowanceDefault;\n};\n\n/**\n * @param {Number} index\n * @returns {Number}\n */\nAmounts.prototype.calculateOtherExemptionAmount = function (index) {\n  return typeof this.otherExemtpionAmounts[index] !== 'undefined' ? this.otherExemtpionAmounts[index] : 0;\n};\n\nmodule.exports = Amounts;\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/modules/Amounts.js\n// module id = 25\n// module chunks = 1\n\n//# sourceURL=webpack:///./src/js/modules/Amounts.js?")},26:function(module,exports,__webpack_require__){"use strict";eval("\n\n/**\n * @param {} dataBox\n * @returns {CertElement}\n */\nvar CertElement = function CertElement(dataBox) {\n  this.subject = $(dataBox).find('.subject');\n  this.sumElement = $(dataBox).find('.sum');\n  this.name = this.subject.attr('name').replace(/\\[|\\]\\[/g, \".\").replace(/\\]$/g, \"\");\n};\n\n/**\n * @param {Number} value\n */\nCertElement.prototype.setSum = function (value) {\n  this.sumElement.empty();\n  this.sumElement.html(this.format(value, 2, 3, '.', ','));\n};\n\n/**\n * @returns {Number}\n */\nCertElement.prototype.getValue = function () {\n  var retVal = null;\n  if (this.subject.length > 1) {\n    this.subject.each(function () {\n      if ($(this).is(':checked')) {\n        retVal = parseFloat($(this).val());\n        return;\n      }\n    });\n    return retVal;\n  }\n  return parseFloat(this.subject.val());\n};\n\n/**\n * Thanks to http://stackoverflow.com/questions/149055/how-can-i-format-numbers-as-money-in-javascript\n *\n * @param {Number} n\n * @param {Number} x\n * @param {string} s\n * @param {string} c\n * @returns {string}\n */\nCertElement.prototype.format = function (value, n, x, s, c) {\n  var re = '\\\\d(?=(\\\\d{' + (x || 3) + '})+' + (n > 0 ? '\\\\D' : '$') + ')',\n      num = value.toFixed(Math.max(0, ~~n));\n\n  return (c ? num.replace('.', c) : num).replace(new RegExp(re, 'g'), '$&' + (s || ','));\n};\n\nmodule.exports = CertElement;\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/modules/CertElement.js\n// module id = 26\n// module chunks = 1\n\n//# sourceURL=webpack:///./src/js/modules/CertElement.js?")},76:function(module,exports,__webpack_require__){"use strict";eval('\n\nvar Amounts = __webpack_require__(25);\nvar CertElement = __webpack_require__(26);\n\n/**\n * @param {Amounts} amounts\n * @returns {Certificate}\n */\n\nfunction addChild() {\n  var index = $("div.child").length;\n  var child = $($("#childrenTemplate").html().replace(new RegExp("__INDEX__", "g"), index));\n  child.find("div.childNumber").html("<span><em>Kind " + (index + 1) + "</em></span>");\n  $("#addChildElement").before(child);\n  return child;\n}\n\nfunction removeChild(el) {\n  $(el).remove();\n}\n\nfunction Certificate(amounts) {\n  if (!amounts instanceof Amounts) {\n    throw new TypeError("Amounts object needed!");\n  }\n\n  this.elements = {};\n  this.amounts = amounts;\n\n  var that = this;\n  $(".cert-box").each(function () {\n    that.addElement(this);\n  });\n\n  $(this.elements.childrenAmount.subject).change(function () {\n    that.adjustChildrenAmount();\n  });\n}\n\n/**\n * @param {Object} element\n */\nCertificate.prototype.addElement = function (element) {\n  var tEl = new CertElement(element),\n      that = this;\n  if (!$(tEl.subject).hasClass("dont-calc")) {\n    $(tEl.subject).change(function () {\n      that.calculate();\n    });\n    $(tEl.subject).keyup(function () {\n      that.calculate();\n      if ($(this).is("input") && $(this).attr("type") === "text") {\n        $(this).val($(this).val().replace(",", "."));\n      }\n    });\n  }\n  this.elements[tEl.name] = tEl;\n};\n\n/**\n * @param {string} name\n */\nCertificate.prototype.removeElement = function (name) {\n  if (typeof this.elements[name] === "undefined") {\n    throw new Error("No element with name " + name + " exists!");\n  }\n  delete this.elements[name];\n};\n\nCertificate.prototype.adjustChildrenAmount = function () {\n  var needed = parseInt($("#childrenAmount").val()),\n      existingChildren = $("div.child"),\n      amount = existingChildren.length;\n  if (needed < amount) {\n    for (var i = amount; i > needed; i--) {\n      existingChildren = $("div.child");\n      existingChildren.last().remove();\n      this.removeElement("children." + (i - 1) + ".allowance");\n    }\n  } else if (needed > amount) {\n    for (var i = 0; i < needed - amount; i++) {\n      this.addElement(addChild());\n    }\n  }\n\n  if (needed === 0 && amount > 0) {\n    $("#otherPaymentsChildrenRow").remove();\n    this.removeElement("otherPaymentsChildren");\n  } else if (needed > 0 && amount === 0) {\n    var otherPaymentsChildren = $($("#otherPaymentsChildrenTemplate").html());\n    otherPaymentsChildren.find(\'input[type="text"][name="otherPaymentsChildren"]\').val(0);\n    this.addElement(otherPaymentsChildren);\n    $("#addChildElement").after(otherPaymentsChildren);\n  }\n  this.calculate();\n};\n\n/**\n * @returns {void}\n */\nCertificate.prototype.calculate = function () {\n  var otherExemptionsCount = 0,\n      childAllowanceCount = 0,\n      exemptedAmount = this.amounts.basicExemptionAmount,\n      tSum;\n\n  this.elements.married.setSum(0);\n  if (this.elements.married.getValue() === 1) {\n    tSum = this.amounts.calculateOtherExemptionAmount(otherExemptionsCount);\n    exemptedAmount += tSum;\n    this.elements.married.setSum(tSum);\n    otherExemptionsCount++;\n  }\n\n  var childrenAmount = this.elements.childrenAmount.getValue();\n  if (childrenAmount > 0) {\n    for (var i = 0; i < childrenAmount; i++) {\n      tSum = 0;\n      this.elements["children." + i + ".allowance"].setSum(tSum);\n      if (this.elements["children." + i + ".allowance"].getValue() === 1) {\n        tSum += this.amounts.calculateChildAllowance(childAllowanceCount);\n        childAllowanceCount++;\n      }\n      tSum += this.amounts.calculateOtherExemptionAmount(otherExemptionsCount);\n      exemptedAmount += tSum;\n      this.elements["children." + i + ".allowance"].setSum(tSum);\n      otherExemptionsCount++;\n    }\n    tSum = this.elements.otherPaymentsChildren.getValue();\n    if (isNaN(tSum)) {\n      tSum = 0;\n    }\n    exemptedAmount += tSum;\n    this.elements.otherPaymentsChildren.setSum(tSum);\n  }\n\n  var exemptionAmountOtherPersons = this.elements.exemptionAmountOtherPersons.getValue();\n  var otherExemptionsSum = 0;\n  for (var i = 0; i < exemptionAmountOtherPersons; i++) {\n    otherExemptionsSum += this.amounts.calculateOtherExemptionAmount(otherExemptionsCount);\n    otherExemptionsCount++;\n  }\n  exemptedAmount += otherExemptionsSum;\n  this.elements.exemptionAmountOtherPersons.setSum(otherExemptionsSum);\n\n  tSum = this.elements.runningPayments.getValue();\n  if (isNaN(tSum)) {\n    tSum = 0;\n  }\n  exemptedAmount += tSum;\n  this.elements.runningPayments.setSum(tSum);\n};\n\nmodule.exports = Certificate;\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/modules/Certificate.js\n// module id = 76\n// module chunks = 1\n\n//# sourceURL=webpack:///./src/js/modules/Certificate.js?')},77:function(module,exports,__webpack_require__){"use strict";eval("\n\n$(document).ready(function () {\n\n  //Submit form with JS\n  $(\"#submit-btn\").click(function (e) {\n    e.preventDefault();\n\n    var $form = $(this).closest('form');\n    var $privacy = $('#privacyAccepted', $form);\n\n    if ($privacy.length && !$privacy[0].checked) {\n      var $label = $('[for=\"privacyAccepted\"]', $form);\n      var $link = $('a', $label);\n\n      $label.css('color', 'red');\n      $link.css({\n        'color': 'red',\n        'text-decoration': 'underline'\n      });\n\n      return;\n    }\n\n    // console.log('form', $form);\n    $form.submit();\n    $('#spinner-circle').show();\n    $('#white-overlay').show();\n  });\n\n  $('[data-toggle]').on('click', function (e) {\n    e.preventDefault();\n    var tgtSel = $(e.currentTarget).attr('data-toggle');\n    $(tgtSel).slideToggle(300);\n  });\n\n  $('.navbar--toggle').on('click', function (e) {\n    e.preventDefault();\n    $('.navbar .nav ul').toggleClass('active');\n    $('.burgermeister').toggleClass('active');\n  });\n\n  $(document).foundation({\n    tooltip: {\n      selector: '.has-tip',\n      additional_inheritable_classes: [],\n      tooltip_class: '.tooltip',\n      touch_close_text: 'tap to close',\n      disable_for_touch: false,\n      tip_template: function tip_template(selector, content) {\n        return '<span data-selector=\"' + selector + '\" class=\"' + Foundation.libs.tooltip.settings.tooltip_class.substring(1) + '\">' + content + '</span>';\n      }\n    }\n  });\n\n  $('[data-modal]').modal();\n});\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/modules/legacy-ui.js\n// module id = 77\n// module chunks = 1\n\n//# sourceURL=webpack:///./src/js/modules/legacy-ui.js?")},79:function(module,exports,__webpack_require__){"use strict";eval("\n\n__webpack_require__(77);\n\nwindow.Certificate = __webpack_require__(76);\nwindow.Amounts = __webpack_require__(25);\nwindow.CertElement = __webpack_require__(26);\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/frontend.js\n// module id = 79\n// module chunks = 1\n\n//# sourceURL=webpack:///./src/js/frontend.js?")}});